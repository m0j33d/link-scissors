{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Navbar from'../components/Navbar';import{connect}from\"react-redux\";import{Navigate}from'react-router-dom';import QRCodeViewer from'../components/QRCodeViewer';import{getLinks}from'../services/shortner';import{getQRcode}from'../services/shortner';import{ThreeDots}from\"react-loader-spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyLinks=function MyLinks(_ref){var logged_in=_ref.logged_in,user=_ref.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),shortenedLinks=_useState2[0],setShortenedLinks=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),generateCode=_useState4[0],setGeneratedCode=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getLinks({user_id:user===null||user===void 0?void 0:user._id});case 3:response=_context.sent;setIsLoading(false);setShortenedLinks(response);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);// Handle any errors\nconsole.error('Error fetching data:',_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[user===null||user===void 0?void 0:user._id]);var handleQRcodeGenerate=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var _res$data;var res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getQRcode({url:url});case 2:res=_context2.sent;setGeneratedCode(res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.url);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function handleQRcodeGenerate(_x){return _ref3.apply(this,arguments);};}();if(!logged_in){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold my-8\",children:\"URL Links\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-full border-collapse\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Original Link\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Short Link\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Clicks\"}),/*#__PURE__*/_jsx(\"th\",{className:\"py-2 px-4 border-b\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:!!shortenedLinks.length&&shortenedLinks.map(function(item){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b text-center\",children:/*#__PURE__*/_jsx(\"a\",{className:\"text-blue-500 hover:underline\",rel:\"noreferrer\",href:item.full_url,target:\"_blank\",children:item.full_url})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b text-center\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"text-blue-500 hover:underline\",rel:\"noreferrer\",href:item.short_url,target:\"_blank\",children:[item.short_url,\" \"]})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-2 px-4 border-b text-center\",children:item.clicks}),/*#__PURE__*/_jsxs(\"td\",{className:\"py-2 px-4 border-b text-center\",children:[generateCode&&/*#__PURE__*/_jsx(QRCodeViewer,{data:generateCode}),!generateCode&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleQRcodeGenerate(item.short_url);},className:\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded\",children:\"Generate QR Code\"})]})]},item===null||item===void 0?void 0:item.id);})})]}),isLoading&&!shortenedLinks.length&&/*#__PURE__*/_jsx(\"section\",{className:\"w-screen my-32 flex justify-center\",children:/*#__PURE__*/_jsx(ThreeDots,{height:\"80\",width:\"80\",radius:\"9\",color:\"#015BB5\",ariaLabel:\"three-dots-loading\",wrapperStyle:{},visible:true})}),!isLoading&&!shortenedLinks.length&&/*#__PURE__*/_jsx(\"div\",{className:\"w-full text-center my-12 \",children:\" You have no shortened links\"})]})]});};var mapStateToProps=function mapStateToProps(state){return{logged_in:state.logged_in,user:state.user};};export default connect(mapStateToProps)(MyLinks);","map":{"version":3,"names":["useState","useEffect","Navbar","connect","Navigate","QRCodeViewer","getLinks","getQRcode","ThreeDots","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MyLinks","_ref","logged_in","user","_useState","_useState2","_slicedToArray","shortenedLinks","setShortenedLinks","_useState3","_useState4","generateCode","setGeneratedCode","_useState5","_useState6","isLoading","setIsLoading","fetchData","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","user_id","_id","sent","t0","console","error","stop","apply","arguments","handleQRcodeGenerate","_ref3","_callee2","url","_res$data","res","_callee2$","_context2","data","_x","to","children","className","length","map","item","rel","href","full_url","target","short_url","clicks","onClick","id","height","width","radius","color","ariaLabel","wrapperStyle","visible","mapStateToProps","state"],"sources":["/Users/user/node-projects/URL-shortener/src/pages/MyLinks.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Navbar from '../components/Navbar';\nimport { connect } from \"react-redux\";\nimport { Navigate } from 'react-router-dom';\nimport QRCodeViewer from '../components/QRCodeViewer';\nimport { getLinks } from '../services/shortner';\nimport { getQRcode } from '../services/shortner';\nimport { ThreeDots } from \"react-loader-spinner\"\n\n\nconst MyLinks = ({ logged_in, user }: { logged_in: boolean, user: any }) => {\n  const [shortenedLinks, setShortenedLinks] = useState([]);\n  const [generateCode, setGeneratedCode] = useState(null);\n  const [isLoading, setIsLoading ] = useState(true)\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await getLinks({ user_id: user?._id });\n        setIsLoading(false)\n        setShortenedLinks(response)\n\n      } catch (error) {\n        // Handle any errors\n        console.error('Error fetching data:', error);\n      }\n    };\n\n    fetchData();\n\n  }, [user?._id]);\n\n  const handleQRcodeGenerate = async (url: string) => {\n    const res = await getQRcode({ url });\n    setGeneratedCode(res?.data?.url)\n  }\n  if (!logged_in) {\n    return <Navigate to=\"/login\" />;\n  }\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"container mx-auto\">\n\n        <h1 className=\"text-2xl font-bold my-8\">URL Links</h1>\n\n        <table className=\"w-full border-collapse\">\n          <thead>\n            <tr>\n              <th className=\"py-2 px-4 border-b\">Original Link</th>\n              <th className=\"py-2 px-4 border-b\">Short Link</th>\n              <th className=\"py-2 px-4 border-b\">Clicks</th>\n              <th className=\"py-2 px-4 border-b\">Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {!!shortenedLinks.length && shortenedLinks.map((item: any) => (\n              <tr key={item?.id}>\n                <td className=\"py-2 px-4 border-b text-center\">\n                  <a className=\"text-blue-500 hover:underline\" rel=\"noreferrer\" href={item.full_url} target='_blank'>{item.full_url}</a>\n                </td>\n                <td className=\"py-2 px-4 border-b text-center\">\n                  <a className=\"text-blue-500 hover:underline\" rel=\"noreferrer\" href={item.short_url} target='_blank'>{item.short_url} </a>\n                </td>\n                <td className=\"py-2 px-4 border-b text-center\">{item.clicks}</td>\n                <td className=\"py-2 px-4 border-b text-center\">\n                  {generateCode && <QRCodeViewer data={generateCode} />}\n\n                  {!generateCode &&  <button\n                    onClick={() => handleQRcodeGenerate(item.short_url)}\n                    className=\"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded\"\n                  >\n                    Generate QR Code\n                  </button>}\n                 \n                </td>\n              </tr>\n            ))}\n          </tbody>\n\n        </table>\n\n        {isLoading && !shortenedLinks.length && <section className='w-screen my-32 flex justify-center'>\n                <ThreeDots\n                    height=\"80\"\n                    width=\"80\"\n                    radius=\"9\"\n                    color=\"#015BB5\"\n                    ariaLabel=\"three-dots-loading\"\n                    wrapperStyle={{}}\n                    visible={true}\n                />\n            </section>\n            }\n\n        {!isLoading && !shortenedLinks.length && <div className='w-full text-center my-12 '> You have no shortened links</div>}\n\n      </div>\n    </>\n  );\n};\n\nconst mapStateToProps = (state: any) => {\n  return {\n    logged_in: state.logged_in,\n    user: state.user,\n  };\n};\n\nexport default connect(mapStateToProps)(MyLinks);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}