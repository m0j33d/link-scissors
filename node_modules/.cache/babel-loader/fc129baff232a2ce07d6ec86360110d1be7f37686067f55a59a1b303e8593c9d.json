{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useFormik}from\"formik\";import*as Yup from\"yup\";import{useState}from\"react\";import{Navigate}from\"react-router-dom\";import{resetPassword}from\"../services/auth\";import LinkScissorLogo from'../assets/images/logo.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ResetPassword(){var _queryParams$get;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),redirect=_useState2[0],setRedirect=_useState2[1];var queryParams=new URLSearchParams(window.location.search);var token=(_queryParams$get=queryParams.get(\"token\"))!==null&&_queryParams$get!==void 0?_queryParams$get:'';var formik=useFormik({initialValues:{password:\"\",password_confirmation:\"\"},validationSchema:Yup.object({password:Yup.string().required(\"password is required\").min(6,\"password must be of 6 characters\"),password_confirmation:Yup.string().oneOf([Yup.ref(\"password\"),undefined],\"Passwords must match\").required(\"Field required\")}),onSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var data,res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:data=_objectSpread(_objectSpread({},values),{},{token:token});_context.next=3;return resetPassword(data);case 3:res=_context.sent;if(res!==null&&res!==void 0&&res.data){_context.next=6;break;}return _context.abrupt(\"return\");case 6:setRedirect(true);case 7:case\"end\":return _context.stop();}},_callee);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});if(redirect)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});var values=formik.values,errors=formik.errors,submitForm=formik.submitForm,isSubmitting=formik.isSubmitting,handleChange=formik.handleChange;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col w-screen h-screen \",children:/*#__PURE__*/_jsxs(\"section\",{className:\"m-auto text-center md:w-96 max-w-2xl\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"flex justify-center my-6\",children:/*#__PURE__*/_jsx(\"img\",{src:LinkScissorLogo,className:\"w-24 h-24\",alt:\"Logo\"})}),/*#__PURE__*/_jsx(\"h2\",{children:\" Create a new password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col my-8\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",name:\"password\",type:\"password\",className:\"form-input\",onChange:handleChange,value:values.password}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.password}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password_confirmation\",className:\"form-label\",children:\"Password confirmation\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"type password again\",name:\"password_confirmation\",type:\"password\",className:\"form-input\",onChange:handleChange,value:values.password_confirmation}),errors.password_confirmation&&/*#__PURE__*/_jsx(\"span\",{className:\"error\",children:errors.password_confirmation}),/*#__PURE__*/_jsx(\"button\",{className:\"button  my-4\",onClick:function onClick(){submitForm();},children:isSubmitting?\"loading...\":\"Change password\"})]})]})})});}","map":{"version":3,"names":["useFormik","Yup","useState","Navigate","resetPassword","LinkScissorLogo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","_queryParams$get","_useState","_useState2","_slicedToArray","redirect","setRedirect","queryParams","URLSearchParams","window","location","search","token","get","formik","initialValues","password","password_confirmation","validationSchema","object","string","required","min","oneOf","ref","undefined","onSubmit","_onSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","data","res","wrap","_callee$","_context","prev","next","_objectSpread","sent","abrupt","stop","_x","apply","arguments","to","errors","submitForm","isSubmitting","handleChange","children","className","href","src","alt","htmlFor","placeholder","name","type","onChange","value","onClick"],"sources":["/Users/user/node-projects/URL-shortener/src/pages/ResetPassword.tsx"],"sourcesContent":["import { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { useState } from \"react\";\nimport { Navigate } from \"react-router-dom\";\n\nimport { resetPassword } from \"../services/auth\";\nimport LinkScissorLogo from '../assets/images/logo.svg';\n\n\nexport default function ResetPassword() {\n    const [redirect, setRedirect] = useState(false);\n    const queryParams = new URLSearchParams(window.location.search)\n    const token = queryParams.get(\"token\") ?? ''\n\n    const formik = useFormik({\n        initialValues: {\n            password: \"\",\n            password_confirmation: \"\",\n        },\n        validationSchema: Yup.object({\n            password: Yup.string()\n                .required(\"password is required\")\n                .min(6, \"password must be of 6 characters\"),\n            password_confirmation: Yup.string()\n                .oneOf([Yup.ref(\"password\"), undefined], \"Passwords must match\")\n                .required(\"Field required\")\n        }),\n        onSubmit: async (values) => {\n            const data = { ...values, token };\n\n            const res = await resetPassword(data);\n\n            if (!res?.data) return;\n\n            setRedirect(true);\n\n        }\n    })\n\n    if (redirect) return <Navigate to=\"/login\" />;\n\n\n    const { values, errors, submitForm, isSubmitting, handleChange } = formik;\n\n    return (\n        <>\n            <div className=\"flex flex-col w-screen h-screen \">\n                <section className=\"m-auto text-center md:w-96 max-w-2xl\">\n                    <a href=\"/\" className='flex justify-center my-6'>\n                        <img src={LinkScissorLogo} className=\"w-24 h-24\" alt=\"Logo\" />\n                    </a>\n                    <h2> Create a new password</h2>\n\n\n                    <div className=\"flex flex-col my-8\">\n\n                        <label htmlFor=\"password\" className=\"form-label\" >Password</label>\n                        <input\n                            placeholder=\"password\"\n                            name=\"password\"\n                            type=\"password\"\n                            className=\"form-input\"\n                            onChange={handleChange}\n                            value={values.password}\n                        />\n                        {errors.password && <span className=\"error\">{errors.password}</span>}\n\n                        <label htmlFor=\"password_confirmation\" className=\"form-label\" >Password confirmation</label>\n                        <input\n                            placeholder=\"type password again\"\n                            name=\"password_confirmation\"\n                            type=\"password\"\n                            className=\"form-input\"\n                            onChange={handleChange}\n                            value={values.password_confirmation}\n                        />\n                        {errors.password_confirmation && <span className=\"error\">{errors.password_confirmation}</span>}\n\n                        <button\n                            className=\"button  my-4\"\n                            onClick={() => {\n                                submitForm();\n                            }}\n                        >\n                            {isSubmitting ? \"loading...\" : \"Change password\"}\n                        </button>\n                    </div>\n\n                </section>\n\n            </div>\n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}