{"ast":null,"code":"import _regeneratorRuntime from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/user/node-projects/URL-shortener/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import api from'./api';import{store}from\"../redux/store\";import{showAlert}from\"../utils/utils\";export var getLinks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref){var user_id,token,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:user_id=_ref.user_id;_context.prev=1;token=store.getState().user_token;_context.next=5;return api.get(\"/url/shorten?user_id=\".concat(user_id),{headers:{Authorization:\"Bearer \".concat(token)}});case 5:response=_context.sent;return _context.abrupt(\"return\",response.data);case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);showAlert({msg:_context.t0.response.data.message,type:\"danger\"});console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function getLinks(_x){return _ref2.apply(this,arguments);};}();export var short=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref3){var url,custom_alias,user_id,token,response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:url=_ref3.url,custom_alias=_ref3.custom_alias,user_id=_ref3.user_id;_context2.prev=1;token=store.getState().user_token;console.log(user_id);_context2.next=6;return api.post(\"/url/shorten\",{url:url,user_id:user_id},{headers:{Authorization:\"Bearer \".concat(token)}});case 6:response=_context2.sent;return _context2.abrupt(\"return\",response.data);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](1);showAlert({msg:_context2.t0.response.data.message,type:\"danger\"});console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[1,10]]);}));return function short(_x2){return _ref4.apply(this,arguments);};}();export var getQRcode=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_ref5){var url,token,response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:url=_ref5.url;_context3.prev=1;token=store.getState().user_token;_context3.next=5;return api.post(\"/url/shorten/qrcode\",{url:url},{headers:{Authorization:\"Bearer \".concat(token)}});case 5:response=_context3.sent;return _context3.abrupt(\"return\",response.data);case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);showAlert({msg:_context3.t0.response.data.message,type:\"danger\"});console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}},_callee3,null,[[1,9]]);}));return function getQRcode(_x3){return _ref6.apply(this,arguments);};}();export var getAnalytics=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(_ref7){var link,token,params,response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:link=_ref7.link;_context4.prev=1;token=store.getState().user_token;params=new URLSearchParams({link:link});_context4.next=6;return api.get(\"/fetch?\".concat(params.toString()),{headers:{Authorization:\"Bearer \".concat(token)}});case 6:response=_context4.sent;return _context4.abrupt(\"return\",response.data);case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](1);console.log(_context4.t0);case 13:case\"end\":return _context4.stop();}},_callee4,null,[[1,10]]);}));return function getAnalytics(_x4){return _ref8.apply(this,arguments);};}();","map":{"version":3,"names":["api","store","showAlert","getLinks","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","user_id","token","response","wrap","_callee$","_context","prev","next","getState","user_token","get","concat","headers","Authorization","sent","abrupt","data","t0","msg","message","type","console","log","stop","_x","apply","arguments","short","_ref4","_callee2","_ref3","url","custom_alias","_callee2$","_context2","post","_x2","getQRcode","_ref6","_callee3","_ref5","_callee3$","_context3","_x3","getAnalytics","_ref8","_callee4","_ref7","link","params","_callee4$","_context4","URLSearchParams","toString","_x4"],"sources":["/Users/user/node-projects/URL-shortener/src/services/shortner.ts"],"sourcesContent":["import api from './api';\nimport { store } from \"../redux/store\";\nimport { showAlert } from \"../utils/utils\";\n\nexport const getLinks = async ({ user_id } : { user_id:string }) => {\n    try {\n        const token = store.getState().user_token;\n        const response = await api.get(`/url/shorten?user_id=${user_id}`, {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n            \n        });\n        return response.data;\n    } catch (error : any) {\n        showAlert({\n            msg: error.response.data.message,\n            type: \"danger\",\n        });\n\n        console.log(error)\n    }\n};\n\nexport const short = async ({ url, custom_alias, user_id } : { url:string , custom_alias: null | string, user_id: string}) => {\n    try {\n        const token = store.getState().user_token;\n\n        console.log(user_id)\n        const response = await api.post(`/url/shorten`,  { url, user_id }, {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n            \n        });\n        return response.data;\n    } catch (error : any) {\n        showAlert({\n            msg: error.response.data.message,\n            type: \"danger\",\n        });\n\n        console.log(error)\n    }\n};\n\nexport const getQRcode = async ({ url } : { url:string | null}) => {\n    try {\n        const token = store.getState().user_token;\n\n        const response = await api.post(`/url/shorten/qrcode`,  { url }, {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n            \n        });\n        return response.data;\n    } catch (error : any) {\n        showAlert({\n            msg: error.response.data.message,\n            type: \"danger\",\n        });\n\n        console.log(error)\n    }\n};\n\nexport const getAnalytics = async ({ link } : { link:string }) => {\n    try {\n        const token = store.getState().user_token;\n        const params = new URLSearchParams({ link });\n\n        const response = await api.get(`/fetch?${params.toString()}`, {\n            headers: {\n                Authorization: `Bearer ${token}`,\n            },\n        });\n\n        return response.data;\n    } catch (error) {\n        console.log(error)\n    }\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}